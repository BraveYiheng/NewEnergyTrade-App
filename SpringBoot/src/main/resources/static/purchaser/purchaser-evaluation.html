<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>采购商-交易评价</title>
    <link rel="stylesheet" href="../element-ui/lib/theme-chalk/index.css">
    <link rel="stylesheet" href="purchaser.css">
    <style>
        .evaluation-card {
            background: #fff;
            border-radius: 8px;
            box-shadow: 0 2px 12px 0 rgba(0,0,0,0.1);
            padding: 20px;
            margin: 20px;
            transition: all 0.3s ease;
        }
        
        .evaluation-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .page-header {
            border-bottom: 2px solid #409EFF;
            padding-bottom: 10px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .el-tabs__item {
            transition: all 0.3s ease;
        }

        .el-tabs__item:hover {
            color: #409EFF;
            transform: translateY(-2px);
        }

        .el-tabs__item.is-active {
            font-weight: bold;
        }

        .el-table {
            margin-top: 20px;
            border-radius: 8px;
            overflow: hidden;
        }

        .el-table th {
            background-color: #f5f7fa !important;
        }

        .el-table tr {
            transition: all 0.3s ease;
        }

        .el-table tr:hover td {
            background-color: #f0f9ff !important;
        }

        .star-rating {
            color: #f7ba2a;
            font-size: 16px;
        }

        .evaluation-content {
            max-width: 300px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .evaluation-time {
            color: #909399;
            font-size: 13px;
        }

        .action-button {
            padding: 4px 12px;
            transition: all 0.3s ease;
        }

        .action-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 2px 8px rgba(64,158,255,0.3);
        }
    </style>
    <script src="../js/vue.js"></script>
    <script src="../js/1.7.2axios.js"></script>
    <script src="../element-ui/lib/index.js"></script>
</head>
<body>
<div id="app">
    <div class="evaluation-card">
        <div class="page-header">
            <i class="el-icon-s-comment" style="font-size: 24px; color: #409EFF;"></i>
            <h2>交易评价</h2>
        </div>
        <el-tabs v-model="evaluationActiveTab" type="border-card">
            <el-tab-pane label="我写的评价" name="myEvaluation">
                <div style="width: 100%; overflow-x: auto;">
                    <el-table :data="myEvaluations" style="min-width: 1000px; width: 100%">
                        <el-table-column prop="orderNumber" label="订单编号" width="120">
                            <template #default="scope">
                                <el-tag size="medium">{{ scope.row.orderNumber }}</el-tag>
                            </template>
                        </el-table-column>
                        <el-table-column prop="starRating" label="星级" width="120">
                            <template #default="scope">
                                <el-rate
                                    v-model="scope.row.starRating"
                                    disabled
                                    show-score
                                    text-color="#ff9900">
                                </el-rate>
                            </template>
                        </el-table-column>
                        <el-table-column prop="comment" label="评价内容" min-width="250">
                            <template #default="scope">
                                <div class="evaluation-content">
                                    <el-tooltip :content="scope.row.comment" placement="top">
                                        <span>{{ scope.row.comment }}</span>
                                    </el-tooltip>
                                </div>
                            </template>
                        </el-table-column>
                        <el-table-column prop="toUserCompanyName" label="评价的公司" width="180">
                            <template #default="scope">
                                <i class="el-icon-office-building"></i>
                                {{ scope.row.toUserCompanyName }}
                            </template>
                        </el-table-column>
                        <el-table-column prop="createTime" label="评价时间" width="180">
                            <template #default="scope">
                                <i class="el-icon-time"></i>
                                <span class="evaluation-time">{{ formatDate(scope.row.createTime) }}</span>
                            </template>
                        </el-table-column>
                        <el-table-column label="操作" width="120" fixed="right">
                            <template #default="scope">
                                <el-popconfirm
                                title="确定要删除这条评价吗？"
                                @confirm="deleteEvaluation(scope.row.evaluationId)">
                                <template #reference>
                                    <el-button 
                                        type="danger" 
                                        size="mini" 
                                        class="action-button"
                                        icon="el-icon-delete">
                                        删除
                                    </el-button>
                                </template>
                                </el-popconfirm>
                            </template>
                        </el-table-column>
                    </el-table>
                </div>
            </el-tab-pane>
            <el-tab-pane label="我收到的评价" name="otherEvaluation">
                <div style="width: 100%; overflow-x: auto;">
                    <el-table :data="otherEvaluations" style="min-width: 1000px; width: 100%">
                        <el-table-column prop="orderNumber" label="订单编号" width="120">
                            <template #default="scope">
                                <el-tag size="medium" type="success">{{ scope.row.orderNumber }}</el-tag>
                            </template>
                        </el-table-column>
                        <el-table-column prop="starRating" label="星级" width="120">
                            <template #default="scope">
                                <el-rate
                                    v-model="scope.row.starRating"
                                    disabled
                                    show-score
                                    text-color="#ff9900">
                                </el-rate>
                            </template>
                        </el-table-column>
                        <el-table-column prop="comment" label="评价内容" min-width="250">
                            <template #default="scope">
                                <div class="evaluation-content">
                                    <el-tooltip :content="scope.row.comment" placement="top">
                                        <span>{{ scope.row.comment }}</span>
                                    </el-tooltip>
                                </div>
                            </template>
                        </el-table-column>
                        <el-table-column prop="fromUserCompanyName" label="评价方公司" width="180">
                            <template #default="scope">
                                <i class="el-icon-office-building"></i>
                                {{ scope.row.fromUserCompanyName }}
                            </template>
                        </el-table-column>
                        <el-table-column prop="createTime" label="评价时间" width="180">
                            <template #default="scope">
                                <i class="el-icon-time"></i>
                                <span class="evaluation-time">{{ formatDate(scope.row.createTime) }}</span>
                            </template>
                        </el-table-column>
                    </el-table>
                </div>
            </el-tab-pane>
        </el-tabs>
    </div>
</div>
<script>
    window.purchaserPageSection = 'evaluation';
</script>
<script src="purchaser.js"></script>
</body>
</html> 